#Start tmux on login
[ -z "$TMUX"  ] && { tmux attach || exec tmux new-session;}

export PATH="/opt/chefdk/bin:$HOME/.rbenv/shims:$PATH:$HOME/scripts:/usr/local/bin:$HOME/go/bin:$HOME/.cargo/bin"
export GOPATH="$HOME/go"
export LANG=en_US.UTF-8
export TERM=xterm-256color
export EDITOR=nvim
export USE_EDITOR=$EDITOR
export VISUAL=$EDITOR
export RUST_SRC_PATH=/Users/ccheek/.rustup/toolchains/nightly-x86_64-apple-darwin/lib/rustlib/src/rust/src
export COLORTERM=truecolor
export NR_JMX_TOOL="$HOME/bluemedora/nrjmx/bin/nrjmx"
export NVIM_LISTEN_ADDRESS=/tmp/nvimsocket
export FZF_CTRL_T_COMMAND='command cat <(fre --sorted) <(fd -t d) <(fd -t d . ~)'
export FZF_CTRL_T_OPTS='--tiebreak=index'
export GROOVY_HOME="/usr/local/opt/groovy/libexec"

fpath=("$HOME/.config/zsh/functions" $fpath)

# Shell Aliases
alias keyboard='node ~/scripts/keyboard.js'
alias notes='nvim $(rg --files ~/notes | fzf)'
alias ls='exa'
alias nv='nvim'
alias org='nvim /home/ccheek/notes/notes.org'
alias todo='nvim ~/notes/todo'
alias sudo='sudo '
alias alarm='mpv --loop-playlist=inf "$HOME/scripts/foghorn.mp3"'
alias pubkey="cat ~/.ssh/id_rsa.pub | pbcopy | echo '=> Public key copied to pasteboard.'"
# Output and copy to clipboard without trailing newline
alias clip='xsel --clipboard'
# Update all canvas files
#alias canvas="python3 $HOME/projects/canvas_downloader/main.py --config $HOME/projects/canvas_downloader/config.yaml"
alias tr='trash'
alias mv='mv -i'

# Copy path to file
function cpth() {
    realpath $1 | xargs echo -n | pbcopy
}


# Config editing aliases

alias ez='nvim ~/.zshrc && source ~/.zshrc'
alias ev='nvim ~/.config/nvim/init.vim'
alias et='nvim ~/.tmux.conf'

# Extract alias
alias extract='dtrx'

# Git Aliases

alias ga='git add'
alias gap='git add --patch'
alias gsup='git submodule init && git submodule update'
alias gc='git commit -m'
alias gl='git pull --prune'
alias gp='git push --follow-tags origin HEAD'
alias gd='git diff'
alias gco='git checkout'
alias gcl='git clean -dix'
alias gb='git branch'
alias gs='git status -sb'
alias gac='git add -A && git commit -m'

zstyle ':completion:*' matcher-list '' 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=*' 'l:|=* r:|=*'
autoload -U async && async
autoload -Uz compinit && compinit
autoload -Uz promptinit
compinit
promptinit
prompt pure

# History

HISTFILE=$HOME/.zsh_history
HISTSIZE=100000
SAVEHIST=100000
setopt append_history
setopt extended_history
setopt hist_ignore_space
setopt hist_verify
setopt share_history
setopt hist_ignore_dups

# Directory Options

setopt auto_pushd
setopt pushd_ignore_dups
setopt pushd_silent
setopt extended_glob

# Define Word Endings

WORDCHARS='*?+[]~=&;!#$%^(){}<>'

# Emacs keybindings
# for more info, man zshzle
bindkey -e


# Terminal Colors

#autoload -U colors
#colors

TC='\e['
Rst="${TC}0m"     # Reset all coloring and style
Black="${TC}30m";
Red="${TC}31m";
Green="${TC}32m";
Yellow="${TC}33m";
Blue="${TC}35m";
Purple="${TC}35m";
Cyan="${TC}36m";
White="${TC}37m";

# Theme

#source "$HOME/.dotfiles/zsh/zsh-theme.zsh"

setopt extended_glob


source ~/.dotfiles/zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
setopt INTERACTIVE_COMMENTS
ZSH_HIGHLIGHT_STYLES[comment]='fg=gray'

# FZF options
#
source "$HOME/.dotfiles/zsh/fzf-key-bindings.zsh"

# Update fre on directory change
fre_chpwd() {
  fre --add "$(pwd)"
}
typeset -gaU chpwd_functions
chpwd_functions+=fre_chpwd
